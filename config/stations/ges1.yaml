station_id: "ges1"
station_name: "ГЭС-1"

connection:
  base_url: "http://192.168.1.249:8200/api/energy/machines"
  adapter: "energy_api"
  timeout: 10s

polling:
  interval: 10s
  timeout: 5s

devices:
  # Линии 35 кВ
  - id: "line_35kv_1"
    name: "Линия 35КВ #1"
    group: "lines_35kv"
    endpoint: "1_35KV"
    request_param: "telemetry"
    fields:
      - {source: "P_kw", target: "active_power_kw", unit: "kW", type: float}
      - {source: "Q_kVar", target: "reactive_power_kvar", unit: "kVar", type: float}
      - {source: "Ia_A", target: "current_a", unit: "A", type: float}
      - {source: "Ib_A", target: "current_b", unit: "A", type: float}
      - {source: "Ic_A", target: "current_c", unit: "A", type: float}
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "cos_phi", target: "power_factor", type: float}

  - id: "line_35kv_2"
    name: "Линия 35КВ #2"
    group: "lines_35kv"
    endpoint: "2_35KV"
    request_param: "telemetry"
    fields:
      - {source: "P_kw", target: "active_power_kw", unit: "kW", type: float}
      - {source: "Q_kVar", target: "reactive_power_kvar", unit: "kVar", type: float}
      - {source: "Ia_A", target: "current_a", unit: "A", type: float}
      - {source: "Ib_A", target: "current_b", unit: "A", type: float}
      - {source: "Ic_A", target: "current_c", unit: "A", type: float}
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "cos_phi", target: "power_factor", type: float}

  # Секции шин 10 кВ
  - id: "bus_10kv_1"
    name: "Секция шин 10КВ #1"
    group: "bus_sections"
    endpoint: "10KV1"
    request_param: "telemetry"
    fields:
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "Ubc_kV", target: "voltage_bc", unit: "kV", type: float}
      - {source: "Uca_kV", target: "voltage_ca", unit: "kV", type: float}
      - {source: "F_Hz", target: "frequency", unit: "Hz", type: float}

  - id: "bus_10kv_2"
    name: "Секция шин 10КВ #2"
    group: "bus_sections"
    endpoint: "10KV2"
    request_param: "telemetry"
    fields:
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "Ubc_kV", target: "voltage_bc", unit: "kV", type: float}
      - {source: "Uca_kV", target: "voltage_ca", unit: "kV", type: float}
      - {source: "F_Hz", target: "frequency", unit: "Hz", type: float}

  # Генераторы - телеметрия
  - id: "gen1_telemetry"
    name: "Гидроагрегат #1"
    group: "generators"
    endpoint: "1_generator_unit"
    request_param: "telemetry"
    fields:
      - {source: "P_kw", target: "active_power_kw", unit: "kW", type: float}
      - {source: "Q_kVar", target: "reactive_power_kvar", unit: "kVar", type: float}
      - {source: "Ia_A", target: "current_a", unit: "A", type: float}
      - {source: "Ib_A", target: "current_b", unit: "A", type: float}
      - {source: "Ic_A", target: "current_c", unit: "A", type: float}
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "Ubc_kV", target: "voltage_bc", unit: "kV", type: float}
      - {source: "Uca_kV", target: "voltage_ca", unit: "kV", type: float}
      - {source: "F_Hz", target: "frequency", unit: "Hz", type: float}
      - {source: "cos_phi", target: "power_factor", type: float}
      - {source: "UL_V", target: "rotor_voltage", unit: "V", type: float}
      - {source: "IL_V", target: "rotor_current", unit: "A", type: float}
      - {source: "opening_degree_one", target: "guide_vane_1", unit: "%", type: float}
      - {source: "opening_degree_two", target: "guide_vane_2", unit: "%", type: float}

  - id: "gen2_telemetry"
    name: "Гидроагрегат #2"
    group: "generators"
    endpoint: "2_generator_unit"
    request_param: "telemetry"
    fields:
      - {source: "P_kw", target: "active_power_kw", unit: "kW", type: float}
      - {source: "Q_kVar", target: "reactive_power_kvar", unit: "kVar", type: float}
      - {source: "Ia_A", target: "current_a", unit: "A", type: float}
      - {source: "Ib_A", target: "current_b", unit: "A", type: float}
      - {source: "Ic_A", target: "current_c", unit: "A", type: float}
      - {source: "Uab_kV", target: "voltage_ab", unit: "kV", type: float}
      - {source: "Ubc_kV", target: "voltage_bc", unit: "kV", type: float}
      - {source: "Uca_kV", target: "voltage_ca", unit: "kV", type: float}
      - {source: "F_Hz", target: "frequency", unit: "Hz", type: float}
      - {source: "cos_phi", target: "power_factor", type: float}
      - {source: "UL_V", target: "rotor_voltage", unit: "V", type: float}
      - {source: "IL_V", target: "rotor_current", unit: "A", type: float}
      - {source: "opening_degree_one", target: "guide_vane_1", unit: "%", type: float}
      - {source: "opening_degree_two", target: "guide_vane_2", unit: "%", type: float}

  # Трансформаторы
  - id: "transformer_1"
    name: "Трансформатор #1"
    group: "transformers"
    endpoint: "1_MT"
    request_param: "telemetry"
    fields:
      - {source: "Oil_C", target: "oil_temperature", unit: "C", type: float}
      - {source: "Winding_C", target: "winding_temperature", unit: "C", type: float}

  - id: "transformer_2"
    name: "Трансформатор #2"
    group: "transformers"
    endpoint: "2_MT"
    request_param: "telemetry"
    fields:
      - {source: "Oil_C", target: "oil_temperature", unit: "C", type: float}
      - {source: "Winding_C", target: "winding_temperature", unit: "C", type: float}

  # Состояние выключателей генераторов
  - id: "gen1_state"
    name: "Состояние ГА #1"
    group: "breaker_states"
    endpoint: "1_GEN"
    request_param: "telemex"
    fields:
      - {source: "CB_Gen1_Output_On", target: "breaker_on", type: bool}
      - {source: "CB_Gen1_Output_WorkPos", target: "breaker_work_pos", type: bool}

  - id: "gen2_state"
    name: "Состояние ГА #2"
    group: "breaker_states"
    endpoint: "2_GEN"
    request_param: "telemex"
    fields:
      - {source: "CB_Gen2_Output_On", target: "breaker_on", type: bool}
      - {source: "CB_Gen2_Output_WorkPos", target: "breaker_work_pos", type: bool}

  # Аварийные сигналы генератора 1 (35 сигналов)
  - id: "gen1_alarms"
    name: "Аварии ГА #1"
    group: "alarms"
    endpoint: "1_GEN_Alarm"
    request_param: "telemex"
    fields:
      # Критические аварии - отключение
      - {source: "Gen1_OverSpeed_140_Alarm", target: "overspeed_140", type: bool, severity: critical}
      - {source: "Gen1_ShearPin_Cut", target: "shear_pin_cut", type: bool, severity: critical}
      - {source: "Gen1_Mechanical_OverSpeed_Trip", target: "mechanical_overspeed_trip", type: bool, severity: critical}
      - {source: "Gen1_CoolingWater_LossPressure_Trip", target: "cooling_water_loss_pressure", type: bool, severity: critical}
      - {source: "Gen1_Emergency_DistValve_On", target: "emergency_dist_valve_on", type: bool, severity: critical}
      - {source: "Gen1_Emergency_Stop_Solenoid_Act", target: "emergency_stop_solenoid", type: bool, severity: critical}
      - {source: "Gen1_Main_GovernorValve_Fail", target: "governor_valve_fail", type: bool, severity: critical}
      - {source: "Gen1_Vibration_Level2_High", target: "vibration_level2_high", type: bool, severity: critical}
      - {source: "Gen1_TempTestDevice_High_Trip", target: "temp_test_device_trip", type: bool, severity: critical}
      - {source: "Gen1_HydroTurbine_Protection_PowerLoss", target: "turbine_protection_power_loss", type: bool, severity: critical}
      - {source: "Gen1_Bearing_Temp_High_Trip", target: "bearing_temp_trip", type: bool, severity: critical}
      - {source: "Gen1_Governor_OilPress_Low_Trip", target: "governor_oil_press_low_trip", type: bool, severity: critical}
      - {source: "Gen1_Stator_Temp_High_Trip", target: "stator_temp_trip", type: bool, severity: critical}
      - {source: "Gen1_Governor_OilLevel_Low_Trip", target: "governor_oil_level_low_trip", type: bool, severity: critical}
      - {source: "Gen1_Emergency_Stop", target: "emergency_stop", type: bool, severity: critical}
      - {source: "Gen1_Emergency_Stop_Fault", target: "emergency_stop_fault", type: bool, severity: critical}
      - {source: "Gen1_Emergency_Stop_Button1_Act", target: "emergency_stop_button1", type: bool, severity: critical}
      - {source: "Gen1_Emergency_Stop_Button2_Act", target: "emergency_stop_button2", type: bool, severity: critical}
      - {source: "Gen1_ExcTrans_Temp_High_Trip", target: "exc_transformer_temp_trip", type: bool, severity: critical}
      - {source: "Gen1_Protection_SetA_Trip", target: "protection_set_a_trip", type: bool, severity: critical}
      - {source: "Gen1_Protection_SetB_Trip", target: "protection_set_b_trip", type: bool, severity: critical}
      - {source: "Gen1_Unit_Fire_Alarm", target: "fire_alarm", type: bool, severity: critical}
      - {source: "Gen1_Protection_General_Trip", target: "protection_general_trip", type: bool, severity: critical}
      - {source: "Gen1_Manual_EmergencyStop_MosaicCab", target: "manual_emergency_stop_mosaic", type: bool, severity: critical}
      # Предупреждения - высокая температура
      - {source: "Gen1_TempTestDevice_High_Alarm", target: "temp_test_device_alarm", type: bool, severity: warning}
      - {source: "Gen1_UpperGuideBearing_Temp1_High_Alarm", target: "upper_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen1_UpperGuideBearing_Temp2_High_Alarm", target: "upper_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen1_LowerGuideBearing_Temp1_High_Alarm", target: "lower_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen1_LowerGuideBearing_Temp2_High_Alarm", target: "lower_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen1_ThrustBearing_Temp1_High_Alarm", target: "thrust_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen1_ThrustBearing_Temp2_High_Alarm", target: "thrust_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen1_TurbineGuideBearing_Temp1_High_Alarm", target: "turbine_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen1_TurbineGuideBearing_Temp2_High_Alarm", target: "turbine_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen1_StatorWinding_Temp_High_Alarm", target: "stator_winding_temp_high", type: bool, severity: warning}
      - {source: "Gen1_StatorCore_Temp_High_Alarm", target: "stator_core_temp_high", type: bool, severity: warning}

  # Аварийные сигналы генератора 2 (35 сигналов)
  - id: "gen2_alarms"
    name: "Аварии ГА #2"
    group: "alarms"
    endpoint: "2_GEN_Alarm"
    request_param: "telemex"
    fields:
      # Критические аварии - отключение
      - {source: "Gen2_OverSpeed_140_Alarm", target: "overspeed_140", type: bool, severity: critical}
      - {source: "Gen2_ShearPin_Cut", target: "shear_pin_cut", type: bool, severity: critical}
      - {source: "Gen2_Mechanical_OverSpeed_Trip", target: "mechanical_overspeed_trip", type: bool, severity: critical}
      - {source: "Gen2_CoolingWater_LossPressure_Trip", target: "cooling_water_loss_pressure", type: bool, severity: critical}
      - {source: "Gen2_Emergency_DistValve_On", target: "emergency_dist_valve_on", type: bool, severity: critical}
      - {source: "Gen2_Emergency_Stop_Solenoid_Act", target: "emergency_stop_solenoid", type: bool, severity: critical}
      - {source: "Gen2_Main_GovernorValve_Fail", target: "governor_valve_fail", type: bool, severity: critical}
      - {source: "Gen2_Vibration_Level2_High", target: "vibration_level2_high", type: bool, severity: critical}
      - {source: "Gen2_TempTestDevice_High_Trip", target: "temp_test_device_trip", type: bool, severity: critical}
      - {source: "Gen2_HydroTurbine_Protection_PowerLoss", target: "turbine_protection_power_loss", type: bool, severity: critical}
      - {source: "Gen2_Bearing_Temp_High_Trip", target: "bearing_temp_trip", type: bool, severity: critical}
      - {source: "Gen2_Governor_OilPress_Low_Trip", target: "governor_oil_press_low_trip", type: bool, severity: critical}
      - {source: "Gen2_Stator_Temp_High_Trip", target: "stator_temp_trip", type: bool, severity: critical}
      - {source: "Gen2_Governor_OilLevel_Low_Trip", target: "governor_oil_level_low_trip", type: bool, severity: critical}
      - {source: "Gen2_Emergency_Stop", target: "emergency_stop", type: bool, severity: critical}
      - {source: "Gen2_Emergency_Stop_Fault", target: "emergency_stop_fault", type: bool, severity: critical}
      - {source: "Gen2_Emergency_Stop_Button1_Act", target: "emergency_stop_button1", type: bool, severity: critical}
      - {source: "Gen2_Emergency_Stop_Button2_Act", target: "emergency_stop_button2", type: bool, severity: critical}
      - {source: "Gen2_ExcTrans_Temp_High_Trip", target: "exc_transformer_temp_trip", type: bool, severity: critical}
      - {source: "Gen2_Protection_SetA_Trip", target: "protection_set_a_trip", type: bool, severity: critical}
      - {source: "Gen2_Protection_SetB_Trip", target: "protection_set_b_trip", type: bool, severity: critical}
      - {source: "Gen2_Unit_Fire_Alarm", target: "fire_alarm", type: bool, severity: critical}
      - {source: "Gen2_Protection_General_Trip", target: "protection_general_trip", type: bool, severity: critical}
      - {source: "Gen2_Manual_EmergencyStop_MosaicCab", target: "manual_emergency_stop_mosaic", type: bool, severity: critical}
      # Предупреждения - высокая температура
      - {source: "Gen2_TempTestDevice_High_Alarm", target: "temp_test_device_alarm", type: bool, severity: warning}
      - {source: "Gen2_UpperGuideBearing_Temp1_High_Alarm", target: "upper_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen2_UpperGuideBearing_Temp2_High_Alarm", target: "upper_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen2_LowerGuideBearing_Temp1_High_Alarm", target: "lower_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen2_LowerGuideBearing_Temp2_High_Alarm", target: "lower_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen2_ThrustBearing_Temp1_High_Alarm", target: "thrust_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen2_ThrustBearing_Temp2_High_Alarm", target: "thrust_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen2_TurbineGuideBearing_Temp1_High_Alarm", target: "turbine_guide_bearing_temp1_high", type: bool, severity: warning}
      - {source: "Gen2_TurbineGuideBearing_Temp2_High_Alarm", target: "turbine_guide_bearing_temp2_high", type: bool, severity: warning}
      - {source: "Gen2_StatorWinding_Temp_High_Alarm", target: "stator_winding_temp_high", type: bool, severity: warning}
      - {source: "Gen2_StatorCore_Temp_High_Alarm", target: "stator_core_temp_high", type: bool, severity: warning}
